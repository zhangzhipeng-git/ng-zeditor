{"version":3,"file":"bigbigbird-ng-zeditor.js","sources":["../../../../projects/bigbigbird/ng-zeditor/src/lib/util/safeHtml.pipe.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/_alert/tip/tip.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/service/tokens.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/_alert/window/window.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/service/DomService.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/ui-link/ui-link.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/ui-table/ui-table.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/ui-annex/ui-annex.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/_form/checkbox/checkbox.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/_form/radio-group/radio-group.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/util/CommonUtil.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/util/CursorUtil.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/ng-zeditor.component.ts","../../../../projects/bigbigbird/ng-zeditor/src/lib/ng-zeditor.module.ts"],"sourcesContent":["/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: ä¿¡ä»»htmlç®¡é\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:36:53 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Pipe({ name: 'safeHTML'})\r\nexport class SafeHtmlPipe implements PipeTransform {\r\n  constructor(private sanitizer: DomSanitizer) {}\r\n  transform(content) {\r\n    return this.sanitizer.bypassSecurityTrustHtml(content);\r\n  }\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: toastç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:25:54 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Component, ViewChild, TemplateRef, ApplicationRef, ComponentRef, EmbeddedViewRef } from '@angular/core';\r\n\r\n@Component({\r\n    // tslint:disable-next-line: component-selector\r\n    selector: 'app-tip',\r\n    templateUrl: 'tip.component.html'\r\n})\r\n\r\nexport class TipComponent {\r\n    /** æ¯å¦æ¿æ´» */\r\n    active: boolean;\r\n    /** æ¯å¦åå¤è¦æ¿æ´» */\r\n    ready: boolean;\r\n    text: string;\r\n    enter: number;\r\n    leave: number;\r\n    duration: number;\r\n    animation: string;\r\n    componentRef: ComponentRef<TipComponent>;\r\n    @ViewChild('tip', {read: TemplateRef, static: true }) tip: TemplateRef<any>;\r\n    get embeddedViewRef() {\r\n        return this.componentRef.hostView as EmbeddedViewRef<any>;\r\n    }\r\n    get rootNode() {\r\n        return this.embeddedViewRef.rootNodes[0];\r\n    }\r\n    get Infinity() {\r\n        return Number.POSITIVE_INFINITY;\r\n    }\r\n    constructor(\r\n        private appRef: ApplicationRef\r\n    ) { }\r\n\r\n    /**\r\n     * æå¼\r\n     * @param options éç½®åæ°\r\n     */\r\n    open(options?: Options) {\r\n        options = Object.assign(this, { enter: 200, leave: 200, duration: 1500, text: '', animation: 'scale' }, options);\r\n        this.text = options.text;\r\n        this.enter = options.enter;\r\n        this.leave = options.leave;\r\n        this.duration = options.duration;\r\n        this.animation = options.animation;\r\n        this.appRef.attachView(this.embeddedViewRef);\r\n        window.document.body.appendChild(this.rootNode);\r\n        // å»¶æ¶æ¿æ´»ï¼é²æ­¢è¿å¥å¨ç»ä¸çæ\r\n        this.ready = true;\r\n        const t = setTimeout(() => { clearTimeout(t); this.active = true; });\r\n        // éæå¨å³é­ï¼å¨æå®æ¶é´åå³é­\r\n        if (this.duration !== -1 && this.duration !== Infinity) { this.close(); }\r\n    }\r\n\r\n    /**\r\n     * å³é­å¼¹çª\r\n     */\r\n    close() {\r\n        // ç¦»å¼\r\n        const t1 = setTimeout(() => {\r\n            clearTimeout(t1);\r\n            this.ready = false;\r\n            this.active = false;\r\n        }, this.enter + this.duration);\r\n        // å½»åºç§»é¤\r\n        const t2 = setTimeout(() => {\r\n            clearTimeout(t2);\r\n            window.document.body.removeChild(this.rootNode);\r\n            this.appRef.detachView(this.embeddedViewRef);\r\n        }, this.enter + this.duration + this.leave);\r\n    }\r\n\r\n}\r\n\r\nexport interface Options {\r\n    /* æç¤ºæå­ */\r\n    text?: string;\r\n    /**\r\n     * å¨ç»åç§°\r\n     * - trans1 ä»ä¸å¾ä¸ï¼è¿å¥ï¼ -> ä»ä¸å°ä¸ï¼ç¦»å¼ï¼\r\n     * - trans2 ä»ä¸å°ä¸ï¼è¿å¥ï¼ -> ä»ä¸å¾ä¸ï¼ç¦»å¼ï¼\r\n     * - scale  æ¾å¤§ï¼è¿å¥ï¼ -> ä»ä¸å°ä¸ï¼ç¦»å¼ï¼ç¼©å°\r\n     */\r\n    animation?: string;\r\n    /** åçæ¶é´ */\r\n    duration?: number;\r\n    /** è¿å¥è¿æ¸¡æ¶é´ */\r\n    enter?: number;\r\n    /** ç¦»å¼è¿æ¸¡æ¶é´ */\r\n    leave?: number;\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: ä»¤çåº\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:34:40 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { InjectionToken } from '@angular/core';\r\nexport const TYPE = new InjectionToken('string or function');\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: å¼¹çªç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:26:52 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport {\r\n    Component,\r\n    ViewChild,\r\n    ElementRef,\r\n    Type,\r\n    ViewContainerRef,\r\n    ApplicationRef,\r\n    ComponentFactoryResolver,\r\n    ComponentRef,\r\n    EmbeddedViewRef,\r\n    Injector\r\n} from '@angular/core';\r\nimport { TYPE } from '../../service/tokens';\r\n\r\n@Component({\r\n    selector: 'app-window',\r\n    templateUrl: './window.component.html',\r\n})\r\nexport class WindowComponent {\r\n    min: boolean = true;\r\n    theme: string;\r\n    animation: string;\r\n    title: string;\r\n    isScale: boolean;\r\n    active: boolean;\r\n    isMove: boolean;\r\n    callback: any;\r\n    leave: number;\r\n    enter: number;\r\n    content: string | Type<any>;\r\n    handler: any;\r\n    componentRef: ComponentRef<WindowComponent>;\r\n    @ViewChild('mask', { read: ElementRef, static: true }) mask: ElementRef;\r\n    @ViewChild('window', { read: ElementRef, static: true }) window: ElementRef;\r\n    @ViewChild('component', { read: ViewContainerRef, static: true }) component: ViewContainerRef;\r\n    get embeddedViewRef() {\r\n        return this.componentRef.hostView as EmbeddedViewRef<any>;\r\n    }\r\n    get rootNode() {\r\n        return this.embeddedViewRef.rootNodes[0];\r\n    }\r\n    get type() {\r\n        return this.injector.get(TYPE) as string;\r\n    }\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private applicationRef: ApplicationRef,\r\n        private componentFactoryResolver: ComponentFactoryResolver\r\n    ) { }\r\n    /**\r\n     * æ¾å¤§ç¼©å°\r\n     * @param e ç¹å»äºä»¶\r\n     */\r\n    switchSize(e: any) {\r\n        if (this.min) { // å½åç¶æä¸ºç¼©å°ï¼ç¹å»æ¾å¤§\r\n            this.window.nativeElement.style.cssText = 'height:100%;width:100%;top:0;left:0;';\r\n            this.min = false;\r\n            const maximize = this.callback.maximize;\r\n            // tslint:disable-next-line: no-unused-expression\r\n            maximize && maximize();\r\n        } else { // å½åç¶æä¸ºæ¾å¤§ï¼ç¹å»ç¼©å°\r\n            this.window.nativeElement.style.cssText = this.window.nativeElement._minStyle;\r\n            this.min = true;\r\n            const minimize = this.callback.minimize;\r\n            // tslint:disable-next-line: no-unused-expression\r\n            minimize && minimize();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ç¹å»å³é­å¼¹çª\r\n     * @param e äºä»¶\r\n     */\r\n    close(e: any) {\r\n        // è®¾ç½®å³é­æ¶çæ¸å\r\n        // å°è¡åtopæ ·å¼æ¶é¤ï¼ä¼åçº§æé«ä¼è¦çcssæä»¶ä¸­çtopæ ·å¼ï¼ï¼ä½¿cssä¸­ç¦»å¼æ¶çtopæ ·å¼çæï¼å¦åcssç±»trans1åtrans2çç¦»å¼æ¸åä¸çæ\r\n        this.window.nativeElement.style.cssText = this.window.nativeElement.style.cssText.replace(/top:(.*)?;/, '');\r\n        this.window.nativeElement.style.transition = 'all ' + this.leave / 1000 + 's';\r\n        this.active = false;\r\n        this.mask.nativeElement.style.display = 'none';\r\n        // ç§»é¤\r\n        setTimeout(() => {\r\n            window.document.body.removeChild(this.rootNode);\r\n            this.applicationRef.detachView(this.embeddedViewRef);\r\n            this.componentRef.destroy();\r\n            this.componentRef = null;\r\n            const close = this.callback.close;\r\n            // tslint:disable-next-line: no-unused-expression\r\n            close && close(e);\r\n\r\n        }, this.leave);\r\n    }\r\n\r\n    /**\r\n     * åå§åæå¼æä½\r\n     * @param  options?\r\n     */\r\n    beforeOpen(options?: WindowOptions) {\r\n        // tslint:disable-next-line: max-line-length\r\n        Object.assign(this, { title: 'å¼¹çª', animation: 'trans1', enter: 200, leave: 200, isScale: false, isMove: true, content: 'ä»ä¹ä¹æ¨æ~', callback: {}, theme: '' }, options);\r\n        if (this.type === 'string') { return; }\r\n        this.component.clear();\r\n        const factory = this.componentFactoryResolver.resolveComponentFactory( (this.content) as Type<any>);\r\n        const componentRef = this.component.createComponent(factory);\r\n        const componentInstance = componentRef.instance;\r\n        componentInstance.parent = this;\r\n        componentInstance.handler = this.handler;\r\n    }\r\n\r\n    /**\r\n     * æå¼å¼¹çª\r\n     */\r\n    open(options?: WindowOptions) {\r\n        this.beforeOpen(options);\r\n        this.mask.nativeElement.style.display = 'block';\r\n        this.applicationRef.attachView(this.embeddedViewRef);\r\n        window.document.body.appendChild(this.rootNode);\r\n        // å·¦å³å±ä¸­ï¼topç¨cssæ§å¶\r\n        const w = this.window.nativeElement.offsetWidth;\r\n        const h = this.window.nativeElement.offsetHeight;\r\n        // å½åçªå£å¤§å°ï¼this.window.parentNode => position:fixed;height:100%;width:100%\r\n        const ww = this.window.nativeElement.parentNode.offsetWidth;\r\n        // åå§å®ä½\r\n        const leftStyle = 'left:' + ((ww - w) / 2) + 'px;';\r\n        this.window.nativeElement.style.cssText += leftStyle;\r\n        // è®°å½æå°åæ¶çæ ·å¼\r\n        this.window.nativeElement._minStyle = leftStyle + 'width:' + (w + 1) + 'px;height:' + (h + 1) + 'px;';\r\n        // è®¾ç½®æå¼æ¶çæ¸å\r\n        this.window.nativeElement.style.transition = 'all ' + (this.enter / 1000) + 's';\r\n        // è¿å¥æ¿æ´»ç¶æï¼å¼¹çªåçï¼\r\n        setTimeout(() => this.active = true);\r\n        // åæ¶æ¸åï¼å¦åç§»å¨ä¼ææ¸å\r\n        setTimeout(() => {\r\n            this.window.nativeElement.style.transition = 'none';\r\n        }, this.enter);\r\n    }\r\n    /**\r\n     * é»æ­¢ææ½\r\n     * @param e ææ½äºä»¶\r\n     */\r\n    tragstart(e: any) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        e.returnValue = false;\r\n    }\r\n    /**\r\n     * å¼å§ç§»å¨\r\n     * @param e äºä»¶\r\n     */\r\n    start(e: any) {\r\n        // å¨å±ç¶æä¸å¯ç§»å¨\r\n        if (!this.min) { return; }\r\n        // ç§»å¨åæ°ä¼ å¥falseï¼ä¸å¯ç§»å¨\r\n        if (!this.isMove) { return; }\r\n        const point = {\r\n            x: e.pageX || e.clientX,\r\n            y: e.pageY || e.clientY\r\n        };\r\n        const dis = {\r\n            x: this.window.nativeElement.offsetLeft - point.x,\r\n            y: this.window.nativeElement.offsetTop - point.y\r\n        };\r\n        this.window.nativeElement._dis = dis;\r\n        // æµè§å¨çªä½\r\n        window.onmouseup = this.end;\r\n        window.onmousemove = this.move;\r\n    }\r\n    /**\r\n     * ç§»å¨\r\n     * @param e äºä»¶\r\n     */\r\n    move = (e: any) => {\r\n        const point = {\r\n            x: e.pageX || e.clientX,\r\n            y: e.pageY || e.clientY\r\n        };\r\n        let top = point.y + this.window.nativeElement._dis.y;\r\n        let left = point.x + this.window.nativeElement._dis.x;\r\n        // å½åçªå£å¤§å°ï¼this.window.parentNode => position:fixed;height:100%;width:100%\r\n        let maxX = this.window.nativeElement.parentNode.clientWidth - this.window.nativeElement.offsetWidth;\r\n        let maxY = this.window.nativeElement.parentNode.clientHeight - this.window.nativeElement.offsetHeight;\r\n        if (maxX < 0) { maxX = 0; }\r\n        if (maxY < 0) { maxY = 0; }\r\n        // å¤æ­æ¯å¦è¶ç\r\n        if (top <= 0) { // yæ¹å\r\n            top = 0;\r\n        } else if (top >= maxY) {\r\n            top = maxY;\r\n        }\r\n        if (left <= 0) { // xæ¹å\r\n            left = 0;\r\n        } else if (left >= maxX) {\r\n            left = maxX - 1; // æ¶é¤è¯¯å·®ï¼é²æ­¢å³æè¿åº¦å¯¼è´å®½åº¦åå°\r\n        }\r\n        this.window.nativeElement.style.top = top + 'px';\r\n        this.window.nativeElement.style.left = left + 'px';\r\n    }\r\n    /**\r\n     * åæ­¢ç§»å¨\r\n     * @param e äºä»¶\r\n     */\r\n    end(e: any) {\r\n        window.onmouseup = null;\r\n        window.onmousemove = null;\r\n    }\r\n}\r\n\r\nexport interface WindowOptions {\r\n    /** å¼¹çªæ é¢ */\r\n    title?: string;\r\n    /**\r\n     * å¨ç»åç§°\r\n     * - trans1 ä»ä¸å¾ä¸ï¼è¿å¥ï¼ -> ä»ä¸å°ä¸ï¼ç¦»å¼ï¼\r\n     * - trans2 ä»ä¸å°ä¸ï¼è¿å¥ï¼ -> ä»ä¸å¾ä¸ï¼ç¦»å¼ï¼\r\n     * - scale  æ¾å¤§ï¼è¿å¥ï¼ -> ä»ä¸å°ä¸ï¼ç¦»å¼ï¼ç¼©å°\r\n     */\r\n    animation?: string;\r\n    /** è¿å¥è¿æ¸¡æ¶é´ */\r\n    enter?: number;\r\n    /** ç¦»å¼è¿æ¸¡æ¶é´ */\r\n    leave?: number;\r\n    /** åè° */\r\n    callback?: WindowCallback;\r\n    /** html | ç»ä»¶ */\r\n    content?: string | Type<any>;\r\n    /** çªä½æ¯å¦å¯æ¾å¤§ç¼©å° */\r\n    isScale?: boolean;\r\n    /** æ¯å¦å¯ç§»å¨ */\r\n    isMove?: boolean;\r\n    /**\r\n     *  ç»ä»¶å®ä¾\r\n     */\r\n    handler?: any;\r\n    // tslint:disable-next-line: jsdoc-format\r\n    /** ä¸»é¢ r g b p*/\r\n    theme?: string;\r\n}\r\n\r\n/** åè° */\r\nexport interface WindowCallback {\r\n    /** å³é­åè° */\r\n    close?(): void;\r\n    /** æå°ååè° */\r\n    minimize?(): void;\r\n    /** æå¤§ååè° */\r\n    maximize?(): void;\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: domæä¾å\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:34:12 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Injectable, ComponentFactoryResolver, Injector, ReflectiveInjector } from '@angular/core';\r\nimport { TipComponent, Options } from '../_alert/tip/tip';\r\nimport { WindowComponent, WindowOptions } from '../_alert/window/window';\r\nimport { TYPE } from './tokens';\r\n\r\n@Injectable()\r\nexport class DomService {\r\n\r\n    /** tostå®ä¾ */\r\n    private toastInstance: TipComponent;\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private componentResolverFactory: ComponentFactoryResolver\r\n    ) { }\r\n\r\n    tost(options?: Options) {\r\n        if (!this.toastInstance) {\r\n            const factory = this.componentResolverFactory.resolveComponentFactory(TipComponent);\r\n            const componentRef = factory.create(this.injector);\r\n            this.toastInstance = componentRef.instance;\r\n            this.toastInstance.componentRef = componentRef;\r\n        }\r\n        this.toastInstance.open(options);\r\n        return this.toastInstance;\r\n    }\r\n\r\n    alert(options?: WindowOptions) {\r\n        const factory = this.componentResolverFactory.resolveComponentFactory(WindowComponent);\r\n        // tslint:disable-next-line: deprecation\r\n        const injector = ReflectiveInjector.resolveAndCreate([{provide: TYPE, useValue: typeof options.content}]);\r\n        const componentRef = factory.create(injector);\r\n        const instance = componentRef.instance;\r\n        instance.componentRef = componentRef;\r\n        instance.open(options);\r\n    }\r\n\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: é¾æ¥ç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:35:23 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Component } from '@angular/core';\r\nimport { DomService } from '../service/DomService';\r\n\r\n@Component({\r\n    selector: 'app-link',\r\n    templateUrl: './ui-link.component.html'\r\n})\r\nexport class UILinkComponent {\r\n    /** æ¯å¦å¨æ°çªå£æå¼ */\r\n    checked = false;\r\n    /** æ é¢ */\r\n    title = '';\r\n    /** url */\r\n    url = 'https://';\r\n    /** åå®¹ */\r\n    content = '';\r\n    handler: any;\r\n    parent: any;\r\n\r\n    constructor(\r\n        private domService: DomService\r\n    ) { }\r\n\r\n    /**\r\n     * åå°form\r\n     */\r\n    emitLinkHTML() {\r\n        if (!/^(\\/\\/|https?:)\\/\\/.+/.test(this.url)) {\r\n            this.domService.tost({\r\n                text: 'é¾æ¥å°åä¸è§è'\r\n            });\r\n            return;\r\n        }\r\n        if (!this.content) {\r\n            this.domService.tost({\r\n                text: 'è¯·å¡«ååå®¹'\r\n            });\r\n            return;\r\n        }\r\n        const html =\r\n            '<a href=\"' +\r\n            this.url +\r\n            '\" ' +\r\n            (this.checked ? 'target=\"_blank\"' : '') +\r\n            (this.title ? 'title=' + this.title : '') +\r\n            '>' +\r\n            this.content +\r\n            '</a>';\r\n        if (this.handler.recieveLinkHTML(html)) {\r\n            this.parent.close();\r\n        }\r\n    }\r\n}\r\n\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: æå¥è¡¨æ ¼ç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:35:55 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Component } from '@angular/core';\r\nimport { DomService } from '../service/DomService';\r\n\r\n@Component({\r\n    selector: 'app-table',\r\n    templateUrl: './ui-table.component.html'\r\n})\r\nexport class UITableComponent {\r\n    /** è¡æ° */\r\n    row = '2';\r\n    /** åæ° */\r\n    col = '2';\r\n    handler: any;\r\n    parent: any;\r\n    constructor(\r\n        private domService: DomService\r\n    ) {\r\n    }\r\n\r\n    emitTableHTML() {\r\n        const reg = /[1-9]{1,2}/;\r\n        if (!reg.test(this.row)) {\r\n            this.domService.tost({\r\n                text: 'è¡æ°ä¸åè¦æ±~'\r\n            });\r\n            return;\r\n        }\r\n        if (!reg.test(this.col)) {\r\n            this.domService.tost({\r\n                text: 'åæ°ä¸åè¦æ±~'\r\n            });\r\n            return;\r\n        }\r\n        let html = '<div><table style=\"width:100%\"><tbody>';\r\n        const r = Number(this.row);\r\n        const c = Number(this.col);\r\n        for (let i = 0; i < r; i++) {\r\n            let tr = '<tr>';\r\n            for (let j = 0; j < c; j++) {\r\n                tr += '<td>' /* + input */ + '</td>';\r\n            }\r\n            html += tr + '</tr>';\r\n        }\r\n        html += '</tbody></table></div><p><br/></p>';\r\n        if (this.handler.recieveTableHTML(html)) {\r\n            this.parent.close();\r\n        }\r\n    }\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: æå¥æä»¶ç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:35:02 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\nimport { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { Radio } from '../_form/radio-group/radio-group';\r\nimport { DomService } from '../service/DomService';\r\nimport { TipComponent } from '../_alert/tip/tip';\r\nimport { AppZeditorComponent } from '../ng-zeditor.component';\r\n\r\n@Component({\r\n    selector: 'app-annex',\r\n    templateUrl: './ui-annex.component.html'\r\n})\r\nexport class UIAnnexComponent {\r\n    /** å¾çç±»å */\r\n    static IMAGEARR = ['image/gif', 'image/jpeg', 'image/jpg', 'image/png', 'image/svg'];\r\n    static AUDIOARR = ['audio/mp3', 'audio/ogg', 'audio/wav'];\r\n    static VIDEOARR = ['video/mp4', 'video/ogg', 'video/webm'];\r\n    url = 'https://';\r\n    width = '100%';\r\n    height = '200px';\r\n    /** è·åç±»åå¯¹åºçåç§° */\r\n    typeName = 'å¾ç';\r\n    /** éæ¸²æinput file */\r\n    rebuild = true;\r\n    radioGroup: Radio[] = [{ value: 'image', text: 'å¾ç' }, { value: 'audio', text: 'é³é¢' }, { value: 'video', text: 'è§é¢' }];\r\n    @ViewChild('file', { static: false, read: ElementRef }) file: ElementRef;\r\n    // tslint:disable-next-line: variable-name\r\n    _type: 'image' | 'audio' | 'video' = 'image';\r\n    handler: any;\r\n    parent: any;\r\n    set type(v: 'image' | 'audio' | 'video') {\r\n        this._type = v;\r\n        this.typeName = { image: 'å¾ç', audio: 'é³é¢', video: 'è§é¢' }[v];\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n\r\n    constructor(\r\n        private domService: DomService\r\n    ) { }\r\n\r\n    /**\r\n     * ç¹å»æ¬å°ä¸ä¼ \r\n     */\r\n    selectFile() {\r\n        // éè¦åè®¾ç½®å®½åº¦åé«åº¦\r\n        const num = /^[1-9]\\d{1,3}(px|rem|em|vw|vh|%)?$/i;\r\n        if (!num.test(this.width + '') || !num.test(this.height + '')) {\r\n            this.domService.tost({\r\n                text: `ä¸ä¼ ${this.typeName}åè¯·å¡«ååéçé«åº¦åå®½åº¦~`\r\n            });\r\n            return;\r\n        }\r\n        const file = this.file.nativeElement;\r\n        const arr = {\r\n            image: UIAnnexComponent.IMAGEARR,\r\n            audio: UIAnnexComponent.AUDIOARR,\r\n            video: UIAnnexComponent.VIDEOARR,\r\n        }[this.type];\r\n        file.accept = arr.join(',');\r\n        if ('onchange' in file) {\r\n            file.onchange = this.fileChange;\r\n        } else {\r\n            file.onpropertychange = this.fileChange;\r\n        }\r\n        file.click();\r\n    }\r\n\r\n    /**\r\n     * éæ©æä»¶\r\n     */\r\n    fileChange = () => {\r\n        const files = this.file.nativeElement.files;\r\n        const file = files[0];\r\n        if (!files.length) { return; }\r\n        this.rebuild = false;\r\n        setTimeout(() => { this.rebuild = true; });\r\n        // ç¼è¾å¨å®ä¾\r\n        const handler: AppZeditorComponent = this.handler;\r\n        // è·åç¼è¾å¨banneréç½®åæ°\r\n        const option = handler.options$[this.type] || {};\r\n        // æ ç­¾\r\n        const tag = { image: 'IMG', audio: 'AUDIO', video: 'VIDEO' }[this.type];\r\n        // å¤æ­æä»¶æ¯å¦è¶è¿æ°é\r\n        if (handler.pannel.getElementsByTagName(tag).length >= (option.count || 1)) {\r\n            this.domService.tost({\r\n                text: `${this.typeName}å·²è¶åºæå¤§æ°é`\r\n            });\r\n            return;\r\n        }\r\n        // å¤æ­æä»¶æ¯å¦éè½¬æbase64\r\n        const base64size = option.base64 || 0;\r\n        if (base64size && file.size <= base64size) {\r\n            // è½¬æbase64\r\n            const fr = new FileReader();\r\n            fr.readAsDataURL(file);\r\n            fr.onload = (event: any) => {\r\n                if (handler.recieveLocalFileHTML(this.getFileHTML(event.target.result))) {\r\n                    this.parent.close();\r\n                }\r\n            };\r\n        } else {\r\n            // äº¤ç»å¤é¨è¿è¡å¤ç\r\n            const tip: TipComponent = this.domService.tost({\r\n                text: 'ä¸ä¼ ä¸­~',\r\n                duration: -1\r\n            });\r\n            // tslint:disable-next-line: no-unused-expression\r\n            handler.emitUploadFile && handler.emitUploadFile(this.type, file, this.getFileHTML, (isSuccess: boolean, t?: number) => {\r\n                if (isSuccess) { // ä¸ä¼ æå\r\n                    tip.close();\r\n                    this.parent.close();\r\n                    return;\r\n                }\r\n                if (!t) { // ä¸ä¼ å¤±è´¥\r\n                    tip.close();\r\n                    this.parent.close();\r\n                    tip.open({ text: 'ä¸ä¼ å¤±è´¥~' });\r\n                    return;\r\n                }\r\n                // ä¸ä¼ è¶æ¶\r\n                const timer = setTimeout(() => {\r\n                    clearTimeout(timer);\r\n                    tip.close();\r\n                    this.parent.close();\r\n                    tip.open({ text: 'ä¸ä¼ è¶æ¶~' });\r\n                }, t);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * æå¥å¤é¾\r\n     */\r\n    insertOutLink() {\r\n        const hasperc = /^[1-9]\\d{1,3}(px|rem|em|vw|vh|%)?$/i;\r\n        if (!hasperc.test(this.width)) {\r\n            this.domService.tost({\r\n                text: 'è¯·å¡«ååéçå®½åº¦~'\r\n            });\r\n            return;\r\n        }\r\n        if (!hasperc.test(this.height)) {\r\n            this.domService.tost({\r\n                text: 'è¯·å¡«ååéçé«åº¦~'\r\n            });\r\n            return;\r\n        }\r\n        if (!/^(\\/\\/|https?:)\\/\\/.+/.test(this.url)) {\r\n            this.domService.tost({\r\n                text: 'é¾æ¥å°åä¸è§è'\r\n            });\r\n            return;\r\n        }\r\n        const html = this.getFileHTML(this.url);\r\n        if (this.handler.recieveFileLinkHTML(html)) {\r\n            this.parent.close();\r\n            this.parent = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ä¼ å¥srcå¹¶æ ¹æ®ç±»åè·åæä»¶html\r\n     */\r\n    getFileHTML = (src: string) => {\r\n        let html = '';\r\n        switch (this.type) {\r\n            case 'image':\r\n                html = this.getImageHTML(src);\r\n                break;\r\n            case 'audio':\r\n                html = this.getAudioHTML(src);\r\n                break;\r\n            case 'video':\r\n                html = this.getVideoHTML(src);\r\n                break;\r\n        }\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * è·åæå¥å¾ççHTML\r\n     * @param src urlæbase64\r\n     */\r\n    getImageHTML(src: string) {\r\n        return (\r\n            '<p style=\"height:' +\r\n            this.height +\r\n            ';\">' +\r\n            '<img src=\"' +\r\n            src +\r\n            '\" style=\"height:' +\r\n            this.height +\r\n            ';width:' +\r\n            this.width +\r\n            ';object-fit:cover;\" />' +\r\n            '</p><br/>'\r\n        );\r\n    }\r\n    /**\r\n     * è·åæå¥é³é¢çHTML\r\n     * @param src url\r\n     */\r\n    getAudioHTML(src: string) {\r\n        const arr = UIAnnexComponent.AUDIOARR;\r\n        // tslint:disable-next-line: max-line-length\r\n        let html = '<p style=\"text-align:center;height:' + this.height + ';\"><audio controls style=\"display:inline-block;height:' + '100%' + ';width:' + this.width + ';\">';\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            html += '<source src=\"' + src + '\" type=\"' + arr[i] + '\">';\r\n        }\r\n        html += 'æ¨çæµè§å¨ä¸æ¯æAudioæ ç­¾ã';\r\n        html += '</audio>&#8205;&zwj;</p><br/>';\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * è·åæå¥è§é¢çHTML\r\n     */\r\n    getVideoHTML(src: string) {\r\n        const arr = UIAnnexComponent.VIDEOARR;\r\n        // tslint:disable-next-line: max-line-length\r\n        let html = '<p style=\"text-align:center;height:' + this.height + ';\"><video controls style=\"display:inline-block;height:' + '100%' + ';width:' + this.width + ';\">';\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            html += '<source src=\"' + src + '\" type=\"' + arr[i] + '\">';\r\n        }\r\n        html += 'æ¨çæµè§å¨ä¸æ¯æVideoæ ç­¾ã';\r\n        html += '</video>&#8205;&zwj;</p><br/>';\r\n        return html;\r\n    }\r\n\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: å¤éæ¡ç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:29:21 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Component, Input, forwardRef, OnInit } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'app-checkbox',\r\n    templateUrl: './checkbox.component.html',\r\n    providers: [{\r\n        provide: NG_VALUE_ACCESSOR,\r\n        useExisting: forwardRef(() => CheckBoxComponent),\r\n        multi: true,\r\n    }]\r\n})\r\n\r\nexport class CheckBoxComponent implements ControlValueAccessor, OnInit {\r\n\r\n    @Input() id: string = '';\r\n    @Input() disabled: boolean = false;\r\n    @Input() value: string | number | boolean = '';\r\n    @Input() checkBoxGroup: Checkbox[];\r\n    model: boolean | any[];\r\n    onChange: (v: boolean | any[]) => void;\r\n    onTouched: () => void;\r\n\r\n    constructor() {}\r\n\r\n    ngOnInit(): void {\r\n        if (!this.checkBoxGroup) {\r\n            return;\r\n        }\r\n        this.model = [];\r\n        this.checkBoxGroup.forEach((ck: Checkbox) => {\r\n            if (ck.checked) {\r\n                (this.model as any).push(ck.value);\r\n            }\r\n        });\r\n    }\r\n    writeValue(obj: any): void {\r\n        this.model = obj;\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onTouched = fn;\r\n    }\r\n    myOnChange(v: any) {\r\n        if (!(this.model instanceof Array)) { // éæ°ç»ï¼è®¤ä¸ºæ¯å¸å°ç±»åï¼\r\n            this.onChange(v);\r\n            return;\r\n        }\r\n        const index = this.model.indexOf(v);\r\n        if (index > -1) {\r\n            this.model.splice(index, 1);\r\n        } else {\r\n            this.model.push(v);\r\n        }\r\n    }\r\n}\r\n\r\n/** åä¸ªcheckboxçéç½® */\r\nexport interface Checkbox {\r\n    /** value */\r\n    value: any;\r\n    /** æ¯å¦éä¸­ */\r\n    checked: any;\r\n    /** disabled */\r\n    disabled?: boolean;\r\n    /** æè¿° */\r\n    text?: string;\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: åéç»ç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:29:49 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\nimport { Component, Input, forwardRef } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n@Component({\r\n    selector: 'app-radio-group',\r\n    templateUrl: './radio-group.component.html',\r\n    providers: [{\r\n        provide: NG_VALUE_ACCESSOR,\r\n        useExisting: forwardRef(() => RadioGroupComponent),\r\n        multi: true,\r\n    }]\r\n})\r\nexport class RadioGroupComponent implements ControlValueAccessor {\r\n    @Input() radioGroup: Radio[] = [];\r\n    model: string | number | boolean;\r\n    onChange: (value: string) => void;\r\n    onTouched: () => void;\r\n\r\n    idPrefix() {\r\n        return 'z' + Math.random().toString().slice(2, 10);\r\n    }\r\n\r\n    constructor() { }\r\n\r\n    writeValue(obj: any): void {\r\n        this.model = obj;\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onTouched = fn;\r\n    }\r\n\r\n}\r\n\r\n/** åä¸ªradioçéç½® */\r\nexport interface Radio {\r\n    /** value */\r\n    value: any;\r\n    /** disabled */\r\n    disabled?: boolean;\r\n    /** æè¿° */\r\n    text?: string;\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: éç¨å·¥å·ç±»\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:36:21 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\nexport default class CommonUtil {\r\n    /**\r\n     * æ ¹æ®åç´ idæ¾åç´ \r\n     * @param id åç´ id\r\n     */\r\n    static id(id: string) {\r\n        return document.getElementById(id);\r\n    }\r\n\r\n    /**\r\n     * å¤æ­æ¯å¦ie\r\n     */\r\n    static isIE() {\r\n        return !!((window as any).ActiveXObject || 'ActiveXObject' in window);\r\n    }\r\n\r\n    /**\r\n     * æ¾ä¸ä¸ä¸ªèç¹\r\n     * @param node èç¹\r\n     */\r\n    static preSibling(node: Node): Node {\r\n        let pre = node;\r\n        // tslint:disable-next-line: no-conditional-assignment curly\r\n        while ((pre = pre.previousSibling) && pre.nodeType !== 1);\r\n        return pre;\r\n    }\r\n\r\n    /**\r\n     * æ¾åç´ çææå­èç¹\r\n     * @param p ç¶åç´ \r\n     */\r\n    static getAllChilds(p: HTMLElement, arr: HTMLElement[] = []): HTMLElement[] {\r\n        arr.push(p);\r\n        // tslint:disable-next-line: curly\r\n        if (!p.children || !p.children.length) return arr;\r\n        Array.prototype.forEach.call(p.children, (child: HTMLElement) => {\r\n            arr = this.getAllChilds(child, arr);\r\n        });\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * å¤æ­pæ¯å¦åå«c\r\n     * @param p åç´ \r\n     * @param c åç´ \r\n     */\r\n    static contains(p: HTMLElement, c: HTMLElement): boolean {\r\n        if (p.contains) { // firefoxä¸æ¯æ\r\n            return p.contains(c);\r\n        }\r\n        // æ¾pçææå­èç¹\r\n        const childs = this.getAllChilds(p);\r\n        for (let i = 0, len = childs.length; i < len; i++) {\r\n            // tslint:disable-next-line: curly\r\n            if (childs[i] === c) return true;\r\n        }\r\n        // tslint:disable-next-line: curly\r\n        if (p === c) return true;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * ä»ä½å±æ¬¡å¾é«å±æ¬¡æ¾ç¬¬indexä¸ªç¶èç¹ï¼æ²¡æåè¿ånull\r\n     * @param  el ç®æ åç´ \r\n     * @param  index ç¬¬indexä¸ªç¶åç´ \r\n     */\r\n    static parent(el: HTMLElement, index: number = 1) {\r\n        let count = index + 1;\r\n        while (el && --count) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            el = (<any> el.parentNode);\r\n        }\r\n        return el;\r\n    }\r\n    /**\r\n     * rgbé¢è²ä¸²è½¬ä»¥#å¼å¤´ç16è¿å¶é¢è²ä¸²\r\n     * @param str rgbé¢è²ä¸²\r\n     */\r\n    static rgbToHex(str: string) {\r\n        if (!str) { return ''; }\r\n        if (str.charAt(0) === '#') { return str; }\r\n        if (str.indexOf('rgb(') < 0) { return ''; }\r\n        str = str.slice(4, -1);\r\n        const arr = str.split(',');\r\n        let str$ = '#';\r\n        arr.forEach((num: string) => {\r\n            let dimStr = Number(num).toString(16);\r\n            dimStr = dimStr.length < 2 ? '0' + dimStr : dimStr;\r\n            str$ += dimStr;\r\n        });\r\n        return str$;\r\n    }\r\n\r\n    /**\r\n     * å°å¤ç»´æ°ç»åä¸ºä¸ç»´æ°ç»\r\n     * @param arr å¤ç»´æ°ç»\r\n     * @param box å®¹å¨\r\n     */\r\n    static flat(arr: Array<any>, box?: Array<any>) {\r\n        // tslint:disable-next-line: curly\r\n        if (!box) box = [];\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            const e = arr[i];\r\n            if (e instanceof Array) {\r\n                this.flat(e, box);\r\n                continue;\r\n            }\r\n            box.push(e);\r\n        }\r\n        return box;\r\n    }\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: åæ å·¥å·ç±»\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:36:44 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\n/** æ§æ åRangeå¯¹è±¡ï¼åªååºå¸¸ç¨çä¸äºå±æ§åæ¹æ³ï¼ */\r\ninterface TextRange {\r\n    htmlText: string;\r\n    text: string;\r\n    pasteHTML(html: string): void;\r\n    collapse(isEnd: boolean): void;\r\n    move(type: 'charactor', offset: number): void;\r\n    moveEnd(type: 'charactor', offset: number): void;\r\n    moveStart(type: 'charactor', offset: number): void;\r\n    moveToElementText(node: HTMLElement | Node): void;\r\n    select(): void;\r\n    parentElement(): HTMLElement;\r\n}\r\n/**\r\n * éåºåèå´å·¥å·ç±»\r\n */\r\nexport default class CursorUtil {\r\n\r\n    /**\r\n     * è·åéåº\r\n     * @param  elem? è¦èç¦çåç´ ï¼å¦æå·²èç¦å¯ä¸ä¼ \r\n     * @returns Selection | TextRange\r\n     */\r\n    static getSelection(elem?: HTMLElement): Selection | TextRange {\r\n        let selection;\r\n        // tslint:disable-next-line: curly\r\n        if (elem && document.activeElement !== elem) elem.focus();\r\n        if (window.getSelection) {\r\n            selection = window.getSelection();\r\n        } else if (document.getSelection) {\r\n            selection = document.getSelection();\r\n        } else {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            selection = (<any> document).body.createRange();\r\n        }\r\n        return selection;\r\n    }\r\n\r\n\r\n    /**\r\n     * è®¾ç½®ç¬¬ä¸ä¸ªèå´\r\n     * @param  range èå´\r\n     */\r\n    static setFirstRange(range: Range | TextRange) {\r\n        const selection = this.getSelection();\r\n        // æ°æ å\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if ((<any> selection).addRange) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Selection> selection).removeAllRanges();\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Selection> selection).addRange(<Range> range);\r\n            return;\r\n        }\r\n        // æ§æ å\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> selection) = <TextRange> range;\r\n    }\r\n\r\n    /**\r\n     * è·åèå´\r\n     * @param  index èå´ä¸æ \r\n     * @param  elem? è¦èç¦çåç´ ï¼å¦æå·²èç¦å¯ä¸ä¼ \r\n     * @returns Range | TextRange \r\n     */\r\n    static getRange(index: number, elem?: HTMLElement): Range | TextRange {\r\n        const selection = this.getSelection(elem);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if ((<Selection> selection).getRangeAt && (<Selection> selection).rangeCount) { // æ°æ å\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            return (<Selection> selection).getRangeAt(index);\r\n        } else { // æ§æ å\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            return (<TextRange> selection);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * éä¸­åç´ elemçåå®¹\r\n     */\r\n    static selectSelectionElementChilds(elem: HTMLElement) {\r\n        // tslint:disable-next-line: curly\r\n        if (!elem) return;\r\n        const selection = this.getSelection();\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if ((<any> selection).selectAllChildren) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Selection> selection).selectAllChildren(elem);\r\n            return;\r\n        }\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> selection).moveToElementText(elem);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> selection).select();\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®éåºå°æä¸ªåç´ ï¼å¹¶æå \r\n     * @param  elem åç´ ï¼è¯¥åç´ å¯ä»¥æ¯ä¸å¯èç¦çåç´ \r\n     * @param isStart æ¯å¦æå å°å¼å¤´\r\n     */\r\n    static setSelectionToElement(elem: HTMLElement, isStart: boolean) {\r\n        this.selectSelectionElementChilds(elem);\r\n        const selection = this.getSelection();\r\n        // æ°æ å\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if (isStart && (<any> selection).collapseToStart) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Selection> selection).collapseToStart();\r\n            return;\r\n        }\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if (!isStart && (<any> selection).collapseToEnd) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Selection> selection).collapseToEnd();\r\n            return;\r\n        }\r\n        // æ§æ å\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> selection).collapse(!isStart);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> selection).select();\r\n    }\r\n\r\n    /**\r\n     * è·åéåºçéä¸­çææ¬\r\n     * @returns string éåºææ¬\r\n     */\r\n    static getSelectionText(): string {\r\n        const selection = this.getSelection();\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        return (<Selection> selection).toString() || (<TextRange> selection).text;\r\n    }\r\n    /**\r\n     * è·åä¸æ ä¸ºindexçèå´ææ¬\r\n     * @param  index ? èå´ä¸æ ï¼æ§æ åå°±åªæä¸ä¸ª\r\n     * @returns string\r\n     */\r\n    static getRangeText(index: number = 0): string {\r\n        const range = this.getRange(index);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        return (<Range> range).toString() || (<TextRange> range).text;\r\n    }\r\n\r\n    /**\r\n     * è·årangeèµ·å§ä½ç½®åç»æä½ç½®çææµçç¶åç´ \r\n     * \r\n     * æ¯å¦ï¼\\<p\\>(range-start)123(range-end)\\</p\\>çå¬å±ç¶åç´ ä¸ºtextï¼èä¸æ¯pæ ç­¾\r\n     * @param  index? å¯éï¼é»è®¤ç¬¬ä¸ä¸ªï¼æ§æ åå°±1ä¸ª\r\n     * @returns Node\r\n     */\r\n    static getRangeCommonParent(index: number = 0): Node {\r\n        const range = this.getRange(index);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if ((<any> range).commonAncestorContainer) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            return (<Range> range).commonAncestorContainer;\r\n        }\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        return (<TextRange> range).parentElement();\r\n    }\r\n\r\n    /**\r\n     * å é¤éä¸­åå®¹\r\n     * @param  index? rangeå¯¹è±¡ä¸æ ï¼é»è®¤0\r\n     */\r\n    static deleteRangeContent(index: number = 0) {\r\n        const range = this.getRange(index);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if ((<any> range).deleteContents) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Range> range).deleteContents();\r\n            return;\r\n        }\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> range).pasteHTML('');\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> range).select();\r\n    }\r\n\r\n    /**\r\n     * æå¥èç¹\r\n     * @param  node èç¹\r\n     * @param  index? rangeå¯¹è±¡ä¸æ ï¼é»è®¤0\r\n     */\r\n    static insertNode(node: Node, index: number = 0) {\r\n        this.deleteRangeContent(index);\r\n        const range = this.getRange(index);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if ((<any> range).insertNode) {\r\n            // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n            (<Range> range).insertNode(node);\r\n            return;\r\n        }\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> range).pasteHTML((<HTMLElement> node).outerHTML);\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        (<TextRange> range).select();\r\n    }\r\n}\r\n","/*\r\n * Created Date: Friday, August 21st 2020, 10:32:15 pm\r\n * Author: æ¨æµã®ççº¸\r\n * ---------------------------------------------------\r\n * Description: ç¼è¾å¨ç»ä»¶\r\n * ---------------------------------------------------\r\n * Last Modified: Saturday August 22nd 2020 11:37:23 am\r\n * Modified By: æ¨æµã®ççº¸\r\n * Contact: 1029512956@qq.com\r\n * Copyright (c) 2020 ZXWORK\r\n */\r\n\r\n// tslint:disable-next-line: max-line-length\r\nimport { Component, Input, ViewChild, OnInit, ElementRef, Renderer2, Output, EventEmitter, forwardRef, ViewEncapsulation } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { WindowOptions } from './_alert/window/window';   // çªä½å¼¹çª\r\nimport { UILinkComponent } from './ui-link/ui-link';      // è¶é¾æ¥UIç»ä»¶\r\nimport { UITableComponent } from './ui-table/ui-table';   // è¡¨æ ¼UIç»ä»¶\r\nimport { UIAnnexComponent } from './ui-annex/ui-annex';   // éä»¶UIç»ä»¶\r\nimport { DomService } from './service/DomService';        // domæä¾å\r\nimport CommonUtil from './util/CommonUtil';               // domå·¥å·ç±»\r\nimport CursorUtil from './util/CursorUtil';               // åæ å·¥å·ç±»\r\n\r\n/** ç¼è¾å¨éç½®åæ° */\r\ninterface Options {\r\n    /** ç¼è¾åå®¹çæå¤§å­èæ° */\r\n    maxsize: number;\r\n    /** ä¸ä¼ è¶æ¶ ms */\r\n    timeout: number;\r\n    /** ä¸ä¼ å¾ççéç½®åæ° */\r\n    image: {\r\n        /** ä¸ä¼ çæå¤§å¾çæ°é */\r\n        count: number;\r\n        /** å°äºæå®å­èæ°ä¼è¿è¡base64ç¼ç  */\r\n        base64: number;\r\n    };\r\n    /** ä¸ä¼ è§é¢çéç½®åæ° */\r\n    video: {\r\n        /** ä¸ä¼ çæå¤§è§é¢æ°é */\r\n        count: number;\r\n    };\r\n    /** ä¸ä¼ é³é¢çéç½®åæ° */\r\n    music: {\r\n        /** ä¸ä¼ çæå¤§é³é¢æ°é */\r\n        count: number;\r\n    };\r\n}\r\n\r\n@Component({\r\n    selector: 'app-zeditor',\r\n    styleUrls: ['./ng-zeditor.component.scss'],\r\n    templateUrl: './ng-zeditor.component.html',\r\n    providers: [{\r\n        provide: NG_VALUE_ACCESSOR,\r\n        useExisting: forwardRef(() => AppZeditorComponent),\r\n        multi: true\r\n    }],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class AppZeditorComponent implements ControlValueAccessor, OnInit {\r\n    @Input()\r\n    set options(v: any) {\r\n        Object.assign(this.options$, v);\r\n    }\r\n    /** ç¼è¾æ¡ */\r\n    get header(): HTMLElement {\r\n        return this.headerRef.nativeElement;\r\n    }\r\n    /** ç¼è¾å¨ */\r\n    get editor(): HTMLElement {\r\n        return this.editorRef.nativeElement;\r\n    }\r\n    /** ç¼è¾é¢æ¿ */\r\n    get pannel(): HTMLElement {\r\n        return this.pannelRef.nativeElement;\r\n    }\r\n    get footer(): HTMLElement {\r\n        return this.footerRef.nativeElement;\r\n    }\r\n    get fontNameEl(): HTMLElement {\r\n        return this.fontNameRef.nativeElement;\r\n    }\r\n    get fontSizeEl(): HTMLElement {\r\n        return this.fontSizeRef.nativeElement;\r\n    }\r\n    get formatBlockEl(): HTMLElement {\r\n        return this.formatBlockRef.nativeElement;\r\n    }\r\n    get foreColorEl(): HTMLElement {\r\n        return this.foreColorRef.nativeElement;\r\n    }\r\n    get backColorEl(): HTMLElement {\r\n        return this.backColorRef.nativeElement;\r\n    }\r\n    get codeEl(): HTMLElement {\r\n        return this.codeRef.nativeElement;\r\n    }\r\n\r\n    constructor(\r\n        private render2: Renderer2,\r\n        private domService: DomService\r\n    ) {\r\n    }\r\n    /** é»è®¤æ ¼å¼ */\r\n    static FORMAT = {\r\n        isBold: false,\r\n        isItalic: false,\r\n        isUnderline: false,\r\n        isStrikeThrough: false,\r\n        scriptActive: '',\r\n        formatBlock: 'p',\r\n        foreColor: '#000000',\r\n        backColor: '#ffffff',\r\n        justifyActive: 'justifyLeft',\r\n        fontSize: { key: 'small', value: '2', value$: '' },\r\n        fontFamily: { key: 'å¾®è½¯éé»', value: 'Microsoft Yahei' }\r\n    };\r\n    /** ä¼ å¥çhtml */\r\n    @Input() vhtml = '<p>è¯·è¾å¥åå®¹~</p>';\r\n    // tslint:disable-next-line: no-output-on-prefix\r\n    @Output() onInput: EventEmitter<string> = new EventEmitter<string>();\r\n    /** æ¯å¦ææé® */\r\n    @Input() hasBtn = false;\r\n    @Output() recieveContent: EventEmitter<any> = new EventEmitter<any>();\r\n    disabled: boolean;\r\n    /** åæ°éç½® */\r\n    options$: any = { maxsize: 65535, timeout: 10000, image: { count: 5, base64: 60000 }, audio: { count: 1 }, video: { count: 1 } };\r\n    /** ä¸»é¢ */\r\n    @Input() theme: 'r' | 'p' | 'b' | 'g' = 'g';\r\n    /** ä¸ä¼ æä»¶ */\r\n    @Output() uploadFile: EventEmitter<{}> = new EventEmitter<{}>();\r\n    /** ç¼è¾æ¡è§å¾å¼ç¨ */\r\n    @ViewChild('headerRef', { read: ElementRef, static: true }) headerRef: ElementRef;\r\n    /** ç¼è¾å¨æ´ä½è§å¾å¼ç¨ */\r\n    @ViewChild('editorRef', { read: ElementRef, static: true }) editorRef: ElementRef;\r\n    /** pannelè§å¾å¼ç¨ */\r\n    @ViewChild('pannelRef', { read: ElementRef, static: true }) pannelRef: ElementRef;\r\n    @ViewChild('footerRef', { read: ElementRef, static: true }) footerRef: ElementRef;\r\n    @ViewChild('fontNameRef', { read: ElementRef, static: true }) fontNameRef: ElementRef;\r\n    @ViewChild('fontSizeRef', { read: ElementRef, static: true }) fontSizeRef: ElementRef;\r\n    @ViewChild('formatBlockRef', { read: ElementRef, static: true }) formatBlockRef: ElementRef;\r\n    @ViewChild('foreColorRef', { read: ElementRef, static: true }) foreColorRef: ElementRef;\r\n    @ViewChild('backColorRef', { read: ElementRef, static: true }) backColorRef: ElementRef;\r\n    @ViewChild('codeRef', { read: ElementRef, static: true }) codeRef: ElementRef;\r\n    /** å­ä½æ ·å¼ */\r\n    // tslint:disable-next-line: max-line-length\r\n    fontFamilys = [{ key: 'arial', value: 'arial' }, { key: 'å¾®è½¯éé»', value: 'Microsoft Yahei' }, { key: 'å®ä½', value: 'SimSun' }, { key: 'é»ä½', value: 'SimHei' }, { key: 'æ¥·ä½', value: 'KaiTi' }, { key: 'å®ä½', value: 'SimSun' }, { key: 'æ°å®ä½', value: 'NSimSun' }, { key: 'ä»¿å®', value: 'FangSong' }, { key: 'å¾®è½¯æ­£é»ä½', value: 'Microsoft JhengHei' }, { key: 'åæç¥ç', value: 'STHupo' }, { key: 'åæå½©äº', value: 'STCaiyun' }, { key: 'å¹¼å', value: 'YouYuan' }, { key: 'åæè¡æ¥·', value: 'STXingkai' }];\r\n    /** ææ¬æ ¼å¼ */\r\n    // tslint:disable-next-line: max-line-length\r\n    formatBlocks = [{ key: 'p', value: '<p data-index=\"0\">p</p>' }, { key: 'h6', value: '<h6 data-index=\"1\">h6</h6>' }, { key: 'h5', value: '<h5 data-index=\"2\">h5</h5>' }, { key: 'h4', value: '<h4 data-index=\"3\">h4</h4>' }, { key: 'h3', value: '<h3 data-index=\"4\">h3</h3>' }, { key: 'h2', value: '<h2 data-index=\"5\">h2</h2>' }, { key: 'h1', value: '<h1 data-index=\"6\">h1</h1>' }];\r\n    /** é¢è² */\r\n    // tslint:disable-next-line: max-line-length\r\n    colors = [['#ffffff', '#000000', '#eeece1', '#1f497d', '#4f81bd', '#c0504d', '#9bbb59', '#8064a2', '#4bacc6', '#f79646'], ['#f2f2f2', '#7f7f7f', '#ddd9c3', '#c6d9f0', '#dbe5f1', '#f2dcdb', '#ebf1dd', '#e5e0ec', '#dbeef3', '#fdeada'], ['#d8d8d8', '#595959', '#c4bd97', '#8db3e2', '#b8cce4', '#e5b9b7', '#d7e3bc', '#ccc1d9', '#b7dde8', '#fbd5b5'], ['#bfbfbf', '#3f3f3f', '#938953', '#548dd4', '#95b3d7', '#d99694', '#c3d69b', '#b2a2c7', '#92cddc', '#fac08f'], ['#a5a5a5', '#262626', '#494429', '#17365d', '#366092', '#953734', '#76923c', '#5f497a', '#31859b', '#e36c09'], ['#7f7f7f', '#0c0c0c', '#1d1b10', '#0f243e', '#244061', '#632423', '#4f6128', '#3f3151', '#205867', '#974806'], ['#c00000', '#ff0000', '#ffc000', '#ffff00', '#92d050', '#00b050', '#00b0f0', '#0070c0', '#002060', '#7030a0']];\r\n    /** å­ä½å¤§å° */\r\n    // tslint:disable-next-line: max-line-length\r\n    fontSizes = [{ key: 'x-small', value: '1', value$: 10 / 16 }, { key: 'small', value: '2', value$: 12 / 16 }, { key: 'medium', value: '3', value$: 16 / 16 }, { key: 'large', value: '4', value$: 18 / 16 }, { key: 'x-large', value: '5', value$: 24 / 16 }, { key: 'xx-large', value: '6', value$: 32 / 16 }, { key: 'xxx-large', value: '7', value$: 48 / 16 }];\r\n    /** code */\r\n    codes = ['Html', 'Css', 'Javascript', 'TypeScript', 'Sass', 'Java', 'Xml', 'Sql', 'Shell'];\r\n    /** éä¸­çå­æ · */\r\n    fontFamily: any = { key: 'å¾®è½¯éé»', value: 'Microsoft Yahei' };\r\n    /** éä¸­çå­å· */\r\n    fontSize: any = { key: 'small', value: 2, value$: 12 / 16 }; // é»è®¤.75rem;\r\n    /** ææ¬æ ¼å¼ */\r\n    formatBlock = 'p';\r\n    /** å­ä½é¢è² */\r\n    foreColor = 'black';\r\n    /** é«äº®è² */\r\n    backColor = 'white';\r\n    /** å½åä»£ç è¯­è¨ */\r\n    code = 'Javascript';\r\n    /** æ¯å¦æå¼å­æ ·é¢æ¿ */\r\n    switchFontFamilyPannel = false;\r\n    /** æ¯å¦æå¼å­å·é¢æ¿ */\r\n    switchFontSizePannel = false;\r\n    /** æ¯å¦æå¼ææ¬æ ¼å¼é¢æ¿ */\r\n    switchFormatBlockPannel = false;\r\n    /** æ¯å¦æå¼å­ä½é¢è²é¢æ¿ */\r\n    switchForeColorPannel = false;\r\n    /** æ¯å¦æå¼èæ¯è²é¢æ¿ */\r\n    switchBackColorPannel = false;\r\n    /** æ¯å¦æå¼ä»£ç è¯­è¨é¢æ¿ */\r\n    switchCodePannel = false;\r\n    /** æ¯å¦å ç² */\r\n    isBold = false;\r\n    /** æ¯å¦æä½ */\r\n    isItalic = false;\r\n    /** æ¯å¦ä¸åçº¿ */\r\n    isUnderline = false;\r\n    /** æ¯å¦å é¤çº¿ */\r\n    isStrikeThrough = false;\r\n    /** é»è®¤æ ä¸ä¸æ  */\r\n    scriptActive = '';\r\n    /** é»è®¤å·¦å¯¹é½ */\r\n    justifyActive = 'justifyLeft';\r\n    /** æ¯å¦å¤äºç¼è¾ç¶æä¸­ */\r\n    isInEditStatus = false;\r\n    /** è®°ä½çrange */\r\n    range: any;\r\n    /** æ¯å¦å¨å±, é»è®¤false */\r\n    full = false;\r\n    /** ç¶åç´  */\r\n    parent!: HTMLElement;\r\n    /** æ¯å¦å¨ä»£ç åº, é»è®¤false */\r\n    inCode = false;\r\n    onChange: (html: string) => void = () => undefined;\r\n    onTouched: () => void = () => undefined;\r\n    writeValue(obj: any): void {\r\n        if (obj !== undefined) {\r\n            this.vhtml = obj;\r\n        }\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onTouched = fn;\r\n    }\r\n    setDisabledState(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n    }\r\n    ngOnInit(): void {\r\n        this.initFormatData();\r\n        this.parent = this.render2.parentNode(this.editor);\r\n    }\r\n    /**\r\n     * åå§åé»è®¤æ ¼å¼\r\n     */\r\n    initFormatData() {\r\n        Object.assign(this, AppZeditorComponent.FORMAT);\r\n    }\r\n\r\n    /**\r\n     * å¦æé¢æ¿ä¸èç¦åä½¿é¢æ¿èç¦\r\n     */\r\n    pannelFocus() {\r\n        if (document.activeElement !== this.pannel) {\r\n            this.pannel.focus();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®å­æ ·\r\n     * @param e äºä»¶\r\n     */\r\n    setFontName(e: any) {\r\n        this.ensureFocus(e);\r\n        const t = e.target;\r\n        const index = t.getAttribute('data-index');\r\n        this.switchFontFamilyPannel = !this.switchFontFamilyPannel;\r\n        if (index === null || index === undefined) { return; }\r\n        this.fontFamily = this.fontFamilys[index * 1];\r\n        this.cmd('fontName', false, this.fontFamily.value);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®å­å·\r\n     */\r\n    setFontSize(e: any) {\r\n        this.ensureFocus(e);\r\n        const t = e.target;\r\n        const index = t.getAttribute('data-index');\r\n        this.switchFontSizePannel = !this.switchFontSizePannel;\r\n        if (index === null || index === undefined) { return; }\r\n        const fontSize = this.fontSizes[index * 1];\r\n        this.fontSize = fontSize;\r\n        this.cmd('fontSize', false, fontSize.value);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®ææ¬æ ¼å¼\r\n     * @param e äºä»¶\r\n     */\r\n    setFormatBlock(e: any) {\r\n        this.ensureFocus(e);\r\n        const t = e.target;\r\n        const index = t.getAttribute('data-index');\r\n        this.switchFormatBlockPannel = !this.switchFormatBlockPannel;\r\n        if (index === null || index === undefined) { return; }\r\n        const formatBlock = this.formatBlocks[index * 1];\r\n        this.formatBlock = formatBlock.key;\r\n        this.cmd('formatBlock', false, '<' + this.formatBlock + '>');\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®åæ¯è²\r\n     * @param e äºä»¶\r\n     */\r\n    setForeColor(e: any) {\r\n        this.ensureFocus(e);\r\n        const t = e.target;\r\n        const x = t.getAttribute('data-dim1');\r\n        const y = t.getAttribute('data-dim2');\r\n        this.switchForeColorPannel = !this.switchForeColorPannel;\r\n        if (x === null || y == null) { return; }\r\n        this.foreColor = this.colors[x][y];\r\n        this.cmd('foreColor', false, this.foreColor);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®èæ¯è²(é«äº®è²)\r\n     * @param e äºä»¶\r\n     */\r\n    setBackColor(e: any) {\r\n        this.ensureFocus(e);\r\n        const t = e.target;\r\n        const x = t.getAttribute('data-dim1');\r\n        const y = t.getAttribute('data-dim2');\r\n        this.switchBackColorPannel = !this.switchBackColorPannel;\r\n        if (x === null || y == null) { return; }\r\n        this.backColor = this.colors[x][y];\r\n        this.cmd('backColor', false, this.backColor);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®ä»£ç è¯­è¨\r\n     * @param e äºä»¶\r\n     */\r\n    insertCode(e: any) {\r\n        this.ensureFocus(e);\r\n        this.switchCodePannel = !this.switchCodePannel;\r\n        const index = e.target.getAttribute('data-index');\r\n        if (index === null) { return; }\r\n        this.code = this.codes[index];\r\n        const code = this.code.toLowerCase();\r\n        const id = (Math.random() + '').slice(2, 8);\r\n        const html = `<pre style=\"white-space:pre;\" title=\"ä»£ç åº\"><code class=\"${code}\"><p id=\"${id}\"><br/></p></code></pre><p><br/></p>`;\r\n        this.cmd('insertHTML', false, html);\r\n        // æå¥htmlåï¼å°åæ ç§»è³ä»£ç åºçpæ ç­¾ä¸­\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        CursorUtil.setSelectionToElement(<any>(CommonUtil.id(id)), true);\r\n        this.setRange(); // æå¨è®°å½ä¸ä¸åæ ä½ç½®\r\n    }\r\n\r\n    /**\r\n     * è¡åæ¢è¡ï¼shift+enterï¼\r\n     * @param e äºä»¶\r\n     */\r\n    insertBrOnReturn(e: any) {\r\n        this.ensureFocus(e);\r\n        if (!this.isSupport('insertBrOnReturn')) {\r\n            this.cmd('insertHTML', false, '<br><br>');\r\n            return;\r\n        }\r\n        this.cmd('insertBrOnReturn', false);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®ç²ä½\r\n     */\r\n    switchBold(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('bold', false, '');\r\n        this.isBold = !this.isBold;\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®æä½\r\n     */\r\n    switchItalic(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('italic', false, '');\r\n        this.isItalic = !this.isItalic;\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®ä¸åçº¿\r\n     */\r\n    switchUnderline(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('underline', false, '');\r\n        this.isUnderline = !this.isUnderline;\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®å é¤çº¿\r\n     */\r\n    switchStrikeThrough(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('strikeThrough', false, '');\r\n        this.isStrikeThrough = !this.isStrikeThrough;\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®/åæ¶ä¸/ä¸æ \r\n     */\r\n    setScript(e: Event, cmd: 'superscript' | 'subscript') {\r\n        this.ensureFocus(e);\r\n        if (this.scriptActive === cmd) {\r\n            this.cmd(cmd, false, '');\r\n            this.scriptActive = '';\r\n            return;\r\n        }\r\n        this.scriptActive = cmd;\r\n        this.cmd(cmd, false, '');\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®æå­å¯¹é½æ¹å\r\n     * @param  e äºä»¶\r\n     */\r\n    setJustifyactive(e: Event, str: 'Left' | 'Right' | 'Center' | 'Full') {\r\n        this.ensureFocus(e);\r\n        this.justifyActive = 'justify' + str;\r\n        this.cmd(this.justifyActive, false);\r\n    }\r\n\r\n    /**\r\n     * ç¼©è¿\r\n     */\r\n    indent(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('indent', false, '');\r\n    }\r\n\r\n    /**\r\n     * åå°ç¼©è¿\r\n     */\r\n    outdent(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('outdent', false, '');\r\n    }\r\n\r\n    /**\r\n     * æå¥æåºåè¡¨\r\n     */\r\n    insertOrderedList(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('insertOrderedList', false, '');\r\n    }\r\n\r\n    /**\r\n     * æå¥æ åºåè¡¨\r\n     */\r\n    insertUnorderedList(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('insertUnorderedList', false, '');\r\n    }\r\n\r\n    /**\r\n     * æå¥è¡¨æ ¼è°èµ·æå¥è¡¨æ ¼UI\r\n     */\r\n    insertTable(e: any) {\r\n        this.alert({ title: 'æå¥è¡¨æ ¼', animation: 'scale', content: UITableComponent, handler: this, theme: this.theme });\r\n    }\r\n    /**\r\n     * ç¹å»è¡¨æ ¼UIå¼¹çªç¡®è®¤æ¶åè°\r\n     * @param html æå¥çhtml\r\n     */\r\n    recieveTableHTML(html: string) {\r\n        this.startEdit();\r\n        this.cmd('insertHTML', false, html);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * æå¥è¶é¾æ¥è°èµ·æå¥è¶é¾æ¥UI\r\n     * @param e äºä»¶\r\n     */\r\n    insertLink(e: any) {\r\n        this.alert({ title: 'æå¥é¾æ¥', animation: 'scale', content: UILinkComponent, handler: this, theme: this.theme });\r\n    }\r\n    /**\r\n     * ç¹å»è¶é¾æ¥UIå¼¹çªç¡®è®¤æ¶åè°\r\n     * @param html æå¥çhtml\r\n     */\r\n    recieveLinkHTML(html: string) {\r\n        this.startEdit();\r\n        this.cmd('insertHTML', false, html);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * æå¥å¾çè°èµ·æå¥å¾çUI\r\n     * @param e äºä»¶\r\n     */\r\n    insertFile(e: any) {\r\n        this.alert({ title: 'æå¥æä»¶', animation: 'scale', content: UIAnnexComponent, handler: this, theme: this.theme });\r\n    }\r\n    /**\r\n     * ç¹å»ä¸ä¼ æä»¶UIå¼¹çªä¸ä¼ æ¬å°æä»¶æ¶åµå¥base64æ¶åè°\r\n     * @param html æå¥çhtml\r\n     */\r\n    recieveLocalFileHTML(html: string) {\r\n        this.startEdit();\r\n        this.cmd('insertHTML', false, html);\r\n        return true;\r\n    }\r\n    /**\r\n     * ç¹å»ä¸ä¼ æä»¶UIå¼¹çªâæå¥å¤é¾âæ¶åè°\r\n     * @param html æå¥çhtml\r\n     */\r\n    recieveFileLinkHTML(html: string) {\r\n        this.startEdit();\r\n        this.cmd('insertHTML', false, html);\r\n        return true;\r\n    }\r\n    /**\r\n     * åå°éæ©æä»¶äºä»¶\r\n     * @param  type æä»¶ç±»å\r\n     * @param  file æä»¶\r\n     * @param  parser ä¼ å¥srcè·åhtml\r\n     * @param  close  å³é­å¼¹çªåé®ç½©\r\n     */\r\n    emitUploadFile(type: 'image' | 'audio' | 'video', file: any, parser: (v: string) => string, close: (b: boolean, t?: number) => void) {\r\n        this.uploadFile.emit({\r\n            type, file, callback: (src: string | boolean, t?: number) => {\r\n                if (!!src) {\r\n                    this.recieveFileLinkHTML(parser(src as string));\r\n                }\r\n                close(!!src, t);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * æå¥hr\r\n     */\r\n    insertHorizontalRule(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('insertHorizontalRule', false, '');\r\n    }\r\n\r\n    /**\r\n     * ç²è´´\r\n     */\r\n    paste(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('paste', false, '');\r\n    }\r\n\r\n    /**\r\n     * åªå\r\n     */\r\n    cut(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('cut', false, '');\r\n    }\r\n\r\n    /**\r\n     * å¤å¶\r\n     */\r\n    copy(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('copy', false, '');\r\n    }\r\n\r\n    /**\r\n     * éä¸­ææ\r\n     */\r\n    selectAll(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('selectAll', false, '');\r\n    }\r\n\r\n    /**\r\n     * éå\r\n     */\r\n    redo(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('redo', false, '');\r\n    }\r\n\r\n    /**\r\n     * æ¤é\r\n     */\r\n    undo(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('undo', false, '');\r\n    }\r\n\r\n    /**\r\n     * å é¤éä¸­\r\n     */\r\n    deleteSelect(e: any) {\r\n        this.ensureFocus(e);\r\n        this.cmd('delete', false, '');\r\n    }\r\n\r\n    /**\r\n     * è·ååå²è¾å¥\r\n     */\r\n    history() {\r\n        this.vhtml = window.localStorage.getItem('editor_input') || '';\r\n        this.autoActive();\r\n    }\r\n\r\n    /**\r\n     * æ¸é¤æ ¼å¼ï¼ä¸é»æ­¢å¤±ç¦ï¼éæ°èç¦æ¶ä¼è®¾ç½®åå²æ ¼å¼\r\n     */\r\n    removeFormat() {\r\n        this.cmd('removeFormat', false);\r\n        this.initFormatData();\r\n    }\r\n\r\n    /**\r\n     * éèåç±»ä¸ææ¡\r\n     * @param e äºä»¶\r\n     */\r\n    hideSwitchPannel(e: any) {\r\n        const target = e.target || e.srcElement;\r\n        if (this.switchFontFamilyPannel && !CommonUtil.contains(this.fontNameEl, target)) {\r\n            this.switchFontFamilyPannel = false;\r\n            return;\r\n        }\r\n        if (this.switchFontSizePannel && !CommonUtil.contains(this.fontSizeEl, target)) {\r\n            this.switchFontSizePannel = false;\r\n            return;\r\n        }\r\n        if (this.switchForeColorPannel && !CommonUtil.contains(this.foreColorEl, target)) {\r\n            this.switchForeColorPannel = false;\r\n            return;\r\n        }\r\n        if (this.switchBackColorPannel && !CommonUtil.contains(this.backColorEl, target)) {\r\n            this.switchBackColorPannel = false;\r\n            return;\r\n        }\r\n        if (this.switchFormatBlockPannel && !CommonUtil.contains(this.formatBlockEl, target)) {\r\n            this.switchFormatBlockPannel = false;\r\n            return;\r\n        }\r\n        if (this.switchCodePannel && !CommonUtil.contains(this.codeEl, target)) {\r\n            this.switchCodePannel = false;\r\n            return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¨å±æåæ¶å¨å±\r\n     */\r\n    SwitchScreen() {\r\n        const editor: any = this.editor;\r\n        const header: any = this.header;\r\n        const pannel: any = this.pannel;\r\n        const footer: any = this.footer;\r\n        this.full = !this.full;\r\n        if (this.full) { // å¨å±\r\n            editor.style.cssText = 'position:fixed;z-index:99999;top:0;left:0;transform:none;width:100%;height:100%;';\r\n            pannel.style.cssText = `max-height:unset;height:${window.innerHeight - header.offsetHeight - footer.offsetHeight}px;`;\r\n            document.body.appendChild(editor);\r\n        } else {        // è¿å\r\n            editor.style.cssText = '';\r\n            pannel.style.cssText = '';\r\n            this.parent.appendChild(editor);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * çå¬æé®äºä»¶ (å¤çtabç¼©è¿)\r\n     * @param e æé®äºä»¶\r\n     */\r\n    keydown(e: Event | any) {\r\n        const key = e.keyCode || e.which || e.charCode;\r\n        if (key !== 9) {\r\n            return;\r\n        }\r\n        // æä¸tabé®ï¼å¢å ç¼©è¿2ä¸ªç©ºæ ¼\r\n        const tab = new Array(5).join('&nbsp;');\r\n        this.cmd('insertHTML', false, tab);\r\n        e.preventDefault();\r\n        return;\r\n    }\r\n\r\n    /**\r\n     * çå¬æé®å¼¹èµ·äºä»¶\r\n     * @param e æé®å¼¹èµ·äºä»¶\r\n     */\r\n    keyup(e: Event | any) {\r\n        this.setRange();\r\n        if (this.isRangeInCode()) { return; }\r\n        // tslint:disable-next-line: deprecation\r\n        e = e || window.event;\r\n        const key = e.keyCode || e.which || e.charCode;\r\n        // çå¬home,endåä¸ä¸å·¦å³æé®ï¼æåéé®æå é¤é®æenteré®ï¼è®¾ç½®æ¿æ´»æå­æ ¼å¼\r\n        if ((key >= 35 && key <= 40) || key === 8 || key === 46 || key === 13) {\r\n            this.autoActive();\r\n            return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ç¹å»é¢æ¿\r\n     */\r\n    pannelOnClick() {\r\n        this.initEdit();\r\n        this.setRange();\r\n        this.autoActive();\r\n    }\r\n\r\n    /**\r\n     * å¨ç¼è¾é¢æ¿ä¸­ç²è´´ï¼è¥å¨ä»£ç åºåç²è´´åæ¸é¤æ ¼å¼ï¼ï¼ï¼ï¼\r\n     */\r\n    pannelOnPaste(e: any) {\r\n        setTimeout(() => { this.autoActive(); });\r\n        if (!this.isRangeInCode()) { return; }\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        const obj = <any>CommonUtil.isIE() ? window : e;\r\n        if (!obj.clipboardData) { return; }\r\n        const text = obj.clipboardData.getData('text');\r\n        const df = document.createDocumentFragment();\r\n        df.appendChild(document.createTextNode(text));\r\n        CursorUtil.insertNode(df);\r\n        e.preventDefault();\r\n        e.returnValue = false;\r\n        this.setRangeAndEmitValue(0);\r\n    }\r\n\r\n    /**\r\n     * è¾å¥æ¶è®°ä½ååä½ç½® && inputäºä»¶åå°value && è®°ä½è¾å¥\r\n     */\r\n    setRangeAndEmitValue(arg0: number | Event) {\r\n        if (typeof arg0 !== 'number') {\r\n            arg0 = 300;\r\n        }\r\n        this.setRange();\r\n        this.debounce(() => {\r\n            const innerHTML = this.pannel.innerHTML;\r\n            if (this.vhtml === innerHTML) { return; }\r\n            // æåå®¹æ¶æä¿å­å°æ¬å°\r\n            const len = (this.pannel.innerText || this.pannel.textContent).length;\r\n            if (len > 1) {\r\n                window.localStorage.setItem('editor_input', innerHTML);\r\n            }\r\n            // 1.åå°innerHTML,inputäºä»¶æ¥æ¶\r\n            this.onInput.emit(innerHTML);\r\n            // 2.è§¦ångModelChangeäºä»¶\r\n            this.onChange(innerHTML);\r\n        }, arg0);\r\n    }\r\n\r\n    /**\r\n     * åå°ç¼è¾åå®¹\r\n     */\r\n    emitContent() {\r\n        let size = 0;\r\n        const editPannel = this.pannel as any;\r\n        // æ£æµç¼è¾åå®¹å¤§å°\r\n        let innerHTML: string = editPannel.innerHTML;\r\n        for (let i = 0, len = innerHTML.length; i < len; i++) {\r\n            const c = innerHTML.charCodeAt(i);\r\n            if (c > 0 && c < 255) {\r\n                size++;\r\n            } else {\r\n                size += 2;\r\n            }\r\n        }\r\n        if (size > this.options$.maxsize) {\r\n            this.toast('ç¼è¾åå®¹è¶åºå¤§å°~');\r\n            innerHTML = innerHTML.substr(0, this.options$.maxsize);\r\n        }\r\n        const image = this.getUrlsByTag(this.pannel, 'img');\r\n        const audio = this.getUrlsByTag(this.pannel, 'audio');\r\n        const video = this.getUrlsByTag(this.pannel, 'video');\r\n        const obj = {\r\n            innerHTML,\r\n            innerTEXT: editPannel.innerText || editPannel.textContent,\r\n            urls: { image, audio, video }\r\n        };\r\n        this.recieveContent.emit(obj);\r\n    }\r\n\r\n    /**\r\n     * ç¡®ä¿ç¼è¾é¢æ¿èç¦ï¼è®¾ç½®ç¼è¾é¢æ¿ä¸æ¬¡åæ ä¸ºå½ååæ \r\n     */\r\n    private recoverRange() {\r\n        if (!this.pannel) { return; }\r\n        // ç¡®ä¿ç¼è¾é¢æ¿åæ¯èç¦ç\r\n        if (document.activeElement !== this.pannel) {\r\n            this.pannel.focus();\r\n        }\r\n        if (this.range) { // å­å¨ä¸æ¬¡åæ ï¼åè®¾ç½®ä¸æ¬¡åæ \r\n            CursorUtil.setFirstRange(this.range);\r\n            return;\r\n        }\r\n        CursorUtil.setSelectionToElement(this.pannel, false);\r\n    }\r\n\r\n    /**\r\n     * 1.èç¦é¢æ¿å¹¶è·åä¸æ¬¡åæ ä½ç½®,è®¾ç½®å½ååå²ç¼è¾æ ·å¼\r\n     * 2.ç¹å»ç¼è¾æ¡çå½ä»¤æèç¼è¾é¢æ¿åï¼å°è§ä¸ºç¼è¾ç¶æ\r\n     * @param  recover? æ¯å¦éè¦æ¢å¤ä¸æ¬¡åæ \r\n     */\r\n    private startEdit(recover: boolean = true) {\r\n        // æ¢å¤ä¸æ¬¡åæ ï¼ç¹å»ç¼è¾é¢æ¿ä¸éè¦æ¢å¤ä¸æ¬¡åæ ï¼ç¹å»ç¼è¾æ¡éè¦æ¢å¤ä¸æ¬¡åæ ï¼\r\n        if (recover) {\r\n            this.recoverRange();\r\n        }\r\n        this.initEdit();\r\n    }\r\n\r\n    /**\r\n     * é»æ­¢é»è®¤äºä»¶é²æ­¢å¤±ç¦ï¼ç¡®ä¿ç¼è¾é¢æ¿èç¦ï¼è®¾ç½®åå²åæ åæ ¼å¼\r\n     * @param e äºä»¶å¯¹è±¡\r\n     */\r\n    private ensureFocus(e: Event) {\r\n        // é»æ­¢å¤±ç¦\r\n        e.preventDefault();\r\n        // ç¼è¾åå§å\r\n        this.startEdit();\r\n    }\r\n\r\n    /**\r\n     * ç¼è¾åå§ååè®¾ç½®åå²æ ¼å¼\r\n     */\r\n    private initEdit() {\r\n        // å¨ç¼è¾ç¶æä¸åæ¬¡è¿è¡åå§å\r\n        if (this.isInEditStatus) {\r\n            return;\r\n        }\r\n        // æ è®°é¢æ¿å¤äºç¼è¾ç¶æ\r\n        if (!this.isInEditStatus) {\r\n            this.isInEditStatus = true;\r\n        }\r\n        // å¨ä»£ç åºä¸è®¾ç½®é»è®¤æ ¼å¼\r\n        if (this.isRangeInCode()) {\r\n            return;\r\n        }\r\n        // å¦æåæ å¨å´æåå®¹åä¸è®¾ç½®é»è®¤æ ¼å¼\r\n        const el = CursorUtil.getRangeCommonParent();\r\n        if (el.nodeType === 3) {\r\n            return;\r\n        }\r\n        // å¦ææ²¡æåå®¹ï¼åæ ¼å¼åé»è®¤æ ¼å¼\r\n        if (!this.pannel.children || !this.pannel.children.length) {\r\n            this.cmd('formatBlock', false, this.formatBlock);\r\n            this.cmd('fontName', false, this.fontFamily.value);\r\n            this.cmd('fontSize', false, this.fontSize.value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ¥è¯¢æ¯å¦æ¯æå½ä»¤\r\n     * @param cmd å½ä»¤\r\n     */\r\n    private isSupport(cmd: string): boolean {\r\n        return document.queryCommandSupported(cmd);\r\n    }\r\n\r\n    /**\r\n     * å¼å®¹insertHTMLå½ä»¤\r\n     * @param html html\r\n     */\r\n    private insertHTML(html: string) {\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        const range = <Range> CursorUtil.getRange(0);\r\n        range.deleteContents();\r\n        const df = document.createDocumentFragment();\r\n        let name = 'div';\r\n        if (html.indexOf('<a>') > -1) { name = 'span'; }\r\n        const el = document.createElement(name);\r\n        el.innerHTML = html;\r\n        df.appendChild(el);\r\n        range.insertNode(df);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * æ§è¡å°è£çç¼è¾å½ä»¤\r\n     * @param k å½ä»¤åç§°\r\n     * @param ui æå¼uiå¼¹çª\r\n     * @param v è®¾ç½®å½ä»¤å¼\r\n     * @returns true-è®¾ç½®æåï¼false-è®¾ç½®å¤±è´¥\r\n     */\r\n    private cmd(k: string, ui: boolean, v?: any) {\r\n        if (!this.isSupport(k)) {\r\n            if ('insertHTML' === k) { return this.insertHTML(v); }\r\n            this.toast('ç³»ç»ä¸æ¯æè¯¥å½ä»¤~');\r\n            return false;\r\n        }\r\n        const r = document.execCommand(k, ui, v || '');\r\n        // æ§è¡å®ä»¥ä¸å½ä»¤åï¼éä»£ç åºåéè¦èªå¨æ£æµæå­æ ¼å¼ï¼æ ·å¼ï¼\r\n        const blackList = 'redo,undo,delete,insertHTML,insertHorizontalRule,insertUnorderedList,insertOrderedList';\r\n        if (r && blackList.indexOf(k) > -1 && !this.isRangeInCode()) {\r\n            this.autoActive();\r\n        }\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * input,click,selectionchangeäºä»¶è®°å½ç¼è¾é¢æ¿åæ ä½ç½®\r\n     */\r\n    private setRange() {\r\n        if (this.isRangeInCode()) {\r\n            this.inCode = true;\r\n        } else {\r\n            this.inCode = false;\r\n        }\r\n        this.range = CursorUtil.getRange(0, this.pannel);\r\n    }\r\n\r\n    /**\r\n     * èªå¨æ£æµæå­æ ¼å¼æ¿æ´»æ ·å¼ï¼å ç²ï¼æä½ï¼ä¸åçº¿ï¼å é¤çº¿ï¼ä¸æ ï¼ä¸æ ......ï¼\r\n     */\r\n    private autoActive() {\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        let p = <HTMLElement>(CursorUtil.getRangeCommonParent());\r\n        if (!p) { return; }\r\n        // å¦æéåå¯¹è±¡çèç¹æ¯ææ¬èç¹ï¼åå°påä¸ºå¶ç¶èç¹\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        if (p.nodeName === '#text') { p = <HTMLElement> p.parentNode; }\r\n        // æ®µè½æ ¼å¼\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.cmd('formatBlock', false, 'p');\r\n                this.formatBlock = AppZeditorComponent.FORMAT.formatBlock;\r\n                return true;\r\n            }\r\n            const formatBlock = e.nodeName;\r\n            const formatBlock$ = this.formatBlocks.find((fb: any) => {\r\n                return fb.key.toUpperCase() === formatBlock;\r\n            });\r\n            if (formatBlock$) {\r\n                this.formatBlock = formatBlock$.key;\r\n                return true;\r\n            }\r\n        });\r\n        // å­æ ·\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.fontFamily = AppZeditorComponent.FORMAT.fontFamily;\r\n                return true;\r\n            }\r\n            const fontFamily = e.getAttribute('face');\r\n            if (!fontFamily) { return; }\r\n            const fontFamily$ = this.fontFamilys.find((ff: any) => {\r\n                return ff.value.toLowerCase() === fontFamily.toLowerCase();\r\n            });\r\n            if (fontFamily$) {\r\n                this.fontFamily = fontFamily$;\r\n                return true;\r\n            }\r\n        });\r\n        // å­å·\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.fontSize = AppZeditorComponent.FORMAT.fontSize;\r\n                return true;\r\n            }\r\n            const fontSize = e.getAttribute('size');\r\n            if (!fontSize) { return; }\r\n            const fontSize$ = this.fontSizes.find((fs: any) => {\r\n                return fs.value === fontSize;\r\n            });\r\n            if (fontSize$) {\r\n                this.fontSize = fontSize$;\r\n                return true;\r\n            }\r\n        });\r\n        // åæ¯è²\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.foreColor = AppZeditorComponent.FORMAT.foreColor;\r\n                return true;\r\n            }\r\n            const foreColor = CommonUtil.rgbToHex(e.getAttribute('color'));\r\n            const foreColor$ = CommonUtil.flat(this.colors).find((cr: any) => {\r\n                return cr.toLowerCase() === foreColor.toLowerCase();\r\n            });\r\n            if (foreColor$) {\r\n                this.foreColor = foreColor$;\r\n                return true;\r\n            }\r\n        });\r\n        // èæ¯è²\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.backColor = AppZeditorComponent.FORMAT.backColor;\r\n                return true;\r\n            }\r\n            const backColor = CommonUtil.rgbToHex(e.style.backgroundColor);\r\n            const backColor$ = CommonUtil.flat(this.colors).find((cr: any) => {\r\n                return cr.toLowerCase() === backColor.toLowerCase();\r\n            });\r\n            if (backColor$) {\r\n                this.backColor = backColor$;\r\n                return true;\r\n            }\r\n        });\r\n        // å ç²\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.isBold = AppZeditorComponent.FORMAT.isBold;\r\n                return true;\r\n            }\r\n            if (e.nodeName === 'STRONG' || e.nodeName === 'B') {\r\n                return this.isBold = true;\r\n            }\r\n        });\r\n        // æä½\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.isItalic = AppZeditorComponent.FORMAT.isItalic;\r\n                return true;\r\n            }\r\n            if (e.nodeName === 'EM' || e.nodeName === 'I') {\r\n                return this.isItalic = true;\r\n            }\r\n        });\r\n        // ä¸åçº¿\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.isUnderline = AppZeditorComponent.FORMAT.isUnderline;\r\n                return true;\r\n            }\r\n            if (e.nodeName === 'U') {\r\n                return this.isUnderline = true;\r\n            }\r\n        });\r\n        // å é¤çº¿\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.isStrikeThrough = AppZeditorComponent.FORMAT.isStrikeThrough;\r\n                return true;\r\n            }\r\n            if (e.nodeName === 'STRIKE') {\r\n                return this.isStrikeThrough = true;\r\n            }\r\n        });\r\n        // ä¸æ ï¼ä¸æ \r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.scriptActive = AppZeditorComponent.FORMAT.scriptActive;\r\n                return true;\r\n            }\r\n            if (e.nodeName === 'SUP') {\r\n                return this.scriptActive = 'superscript';\r\n            }\r\n            if (e.nodeName === 'SUB') {\r\n                return this.scriptActive = 'subscript';\r\n            }\r\n        });\r\n        // å¯¹é½æ¹å¼\r\n        this.grandChildTograndParent(p, (e: HTMLElement) => {\r\n            if (e === this.pannel) {\r\n                this.justifyActive = AppZeditorComponent.FORMAT.justifyActive;\r\n                return true;\r\n            }\r\n            const textAlign = e.getAttribute('align') || e.style.textAlign;\r\n            if (textAlign === 'left') {\r\n                return this.justifyActive = 'justifyLeft';\r\n            } else if (textAlign === 'center') {\r\n                return this.justifyActive = 'justifyCenter';\r\n            } else if (textAlign === 'right') {\r\n                return this.justifyActive = 'justifyRight';\r\n            } else if (textAlign === 'justify') {\r\n                return this.justifyActive = 'justifyFull';\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * ä»ææ·±å±èç¹å°æå¤å±èç¹æ§è¡åè°\r\n     * @param start ææ·±å±èç¹\r\n     * @param end æå¤å±èç¹\r\n     * @param fn åè° ç´å°åè°è¿åtrueæ¶æä¼ç»æ­¢åè°çæ§è¡\r\n     */\r\n    private grandChildTograndParent(start: any, fn: any) {\r\n        let o = start;\r\n        while (!!o) {\r\n            if (fn(o)) { return; }\r\n            o = o.parentNode;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ¾ç®æ åç´ ççæä¸ªæ ç­¾çurlsåbase64çurl\r\n     * @param target åç´ \r\n     * @param tag æ ç­¾\r\n     */\r\n    private getUrlsByTag(target: HTMLElement, tag: string): { type: 'url' | 'base64', src: string }[] {\r\n        const arr = [] as any;\r\n        const tags = target.getElementsByTagName(tag.toUpperCase());\r\n        Array.prototype.forEach.call(tags, elem => {\r\n            const item = {} as any;\r\n            const src = elem.src;\r\n            if (src.indexOf('data:image/png;base64,') === -1) {\r\n                item.type = 'url';\r\n            } else {\r\n                item.type = 'base64';\r\n            }\r\n            item.src = src;\r\n            arr.push(item);\r\n        });\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * å¤æ­èå´Rangeæ¯å¦åä»£ç åºæäº¤é\r\n     * @returns true - æäº¤éï¼false - æ äº¤é\r\n     */\r\n    private isRangeInCode(): boolean {\r\n        this.pannelFocus();\r\n        let parent = CursorUtil.getRangeCommonParent() as any;\r\n        if (!parent) { return false; }\r\n        // å¦ææ¯ææ¬èç¹åæ¾å¶ç¶åç´ \r\n        if (parent.nodeType === 3) { parent = parent.parentNode; }\r\n        return (() => { // è¢«åå«\r\n            let parent$ = parent;\r\n            // tslint:disable-next-line: no-conditional-assignment\r\n            while (parent$ = parent$.parentNode) {\r\n                if (parent$.tagName === 'CODE') {\r\n                    return true;\r\n                }\r\n                if (parent$ === this.pannel) {\r\n                    return false;\r\n                }\r\n            }\r\n            return false;\r\n        })() || (() => { // åå«\r\n            const nodes = parent.querySelectorAll('code');\r\n            return nodes && nodes.length;\r\n        })();\r\n    }\r\n\r\n    /**\r\n     * toastæç¤º\r\n     * @param  text? toastæç¤º é»è®¤ä¸ºâè®¾ç½®æ æ~â\r\n     * @param  duration? åçæ¶é´\r\n     */\r\n    private toast(text: string = 'è®¾ç½®æ æ~', obj?: { duration: number, enter: number, leave: number }) {\r\n        return this.domService.tost({ text, ...obj });\r\n    }\r\n\r\n    /**\r\n     * å¼¹çª\r\n     */\r\n    private alert(obj: WindowOptions) {\r\n        return this.domService.alert(obj);\r\n    }\r\n\r\n\r\n    /**\r\n     * é²æ\r\n     * @param  f åè°\r\n     * @param  t? é²ææ¶å»¶ é»è®¤300ms\r\n     */\r\n    private debounce(f: () => void, t: number = 300) {\r\n        const o = this.debounce as any;\r\n        clearTimeout(o.timer);\r\n        o.timer = setTimeout(() => {\r\n            f();\r\n        }, t);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { SafeHtmlPipe } from './util/safeHtml.pipe';\nimport { DomService } from './service/DomService';\nimport { TipComponent } from './_alert/tip/tip';\nimport { WindowComponent } from './_alert/window/window';\nimport { UILinkComponent } from './ui-link/ui-link';\nimport { UITableComponent } from './ui-table/ui-table';\nimport { UIAnnexComponent } from './ui-annex/ui-annex';\nimport { CheckBoxComponent } from './_form/checkbox/checkbox';\nimport { RadioGroupComponent } from './_form/radio-group/radio-group';\nimport { AppZeditorComponent } from './ng-zeditor.component';\nimport { FormsModule} from '@angular/forms';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule\n    ],\n    declarations: [\n        AppZeditorComponent,\n        TipComponent,\n        WindowComponent,\n        UILinkComponent,\n        UITableComponent,\n        UIAnnexComponent,\n        CheckBoxComponent,\n        RadioGroupComponent,\n        SafeHtmlPipe\n    ],\n    providers: [\n        DomService\n    ],\n    entryComponents: [\n        TipComponent,\n        WindowComponent,\n        UILinkComponent,\n        UITableComponent,\n        UIAnnexComponent\n    ],\n    exports: [\n        AppZeditorComponent,\n        FormsModule,\n        CommonModule\n    ]\n})\nexport class NgZeditorModule { }\n"],"names":["Options"],"mappings":"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"}